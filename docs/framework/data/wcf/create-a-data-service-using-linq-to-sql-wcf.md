---
description: "Learn more about: How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)"
title: "How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)"
ms.date: "03/30/2017"
ms.topic: how-to
dev_langs:
  - "csharp"
  - "vb"
helpviewer_keywords:
  - "WCF Data Services, LINQ to SQL"
  - "WCF Data Services, providers"
ms.assetid: 3b01c2fd-8c6e-4bf5-b38f-9e61bdc3c328
---
# How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)

[!INCLUDE [wcf-deprecated](~/includes/wcf-deprecated.md)]

WCF Data Services exposes entity data as a data service. The reflection provider enables you to define a data model that is based on any class that exposes members that return an <xref:System.Linq.IQueryable%601> implementation. To be able to make updates to data in the data source, these classes must also implement the <xref:System.Data.Services.IUpdatable> interface. For more information, see [Data Services Providers](data-services-providers-wcf-data-services.md). This topic shows you how to create LINQ to SQL classes that access the Northwind sample database by using the reflection provider, as well as how to create the data service that is based on these data classes.

## To add LINQ to SQL classes to a project

1. From within a Visual Basic or C# application, on the **Project** menu, click **Add** > **New Item**.

2. Click the **LINQ to SQL Classes** template.

3. Change the name to **Northwind.dbml**.

4. Click **Add**.

     The Northwind.dbml file is added to the project and the Object Relational Designer (O/R Designer) opens.

5. In **Server**/**Database Explorer**, under Northwind, expand **Tables** and drag the `Customers` table onto the Object Relational Designer (O/R Designer).

     A `Customer` entity class is created and appears on the design surface.

6. Repeat step 6 for the `Orders`, `Order_Details`, and `Products` tables.

7. Right-click the new .dbml file that represents the LINQ to SQL classes and click **View Code**.

     This creates a new code-behind page named Northwind.cs that contains a partial class definition for the class that inherits from the <xref:System.Data.Linq.DataContext> class, which in this case is `NorthwindDataContext`.

8. Replace the contents of the Northwind.cs code file with the following code. This code implements the reflection provider by extending the <xref:System.Data.Linq.DataContext> and data classes generated by LINQ to SQL:

     [!code-csharp[Astoria Linq Provider#Linq2SqlProvider](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_linq_provider/cs/northwind.cs#linq2sqlprovider)]
     [!code-vb[Astoria Linq Provider#Linq2SqlProvider](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_linq_provider/vb/northwind.vb#linq2sqlprovider)]

### To create a data service by using a LINQ to SQL-based data model

1. In **Solution Explorer**, right-click the name of your ASP.NET project, and then click **Add** > **New Item**.

2. In the **Add New Item** dialog box, select the **WCF Data Service** template from the **Web** category.

   ![WCF Data Service item template in Visual Studio 2015](./media/wcf-data-service-item-template.png)

   > [!NOTE]
   > The **WCF Data Service** template is available in Visual Studio 2015, but not in Visual Studio 2017 or later.

3. Supply a name for the service, and then click **OK**.

     Visual Studio creates the XML markup and code files for the new service. By default, the code-editor window opens.

4. In the code for the data service, replace the comment `/* TODO: put your data source class name here */` in the definition of the class that defines the data service with the type that is the entity container of the data model, which in this case is `NorthwindDataContext`.

5. In the code for the data service, replace the placeholder code in the `InitializeService` function with the following:

     [!code-csharp[Astoria Linq Provider#EnableAccess](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_linq_provider/cs/northwind.svc.cs#enableaccess)]
     [!code-vb[Astoria Linq Provider#EnableAccess](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_linq_provider/vb/northwind.svc.vb#enableaccess)]

     This enables authorized clients to access resources for the three specified entity sets.

6. To test the Northwind.svc data service by using a Web browser, follow the instructions in the topic [Accessing the Service from a Web Browser](accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md).

## See also

- [How to: Create a Data Service Using an ADO.NET Entity Framework Data Source](create-a-data-service-using-an-adonet-ef-data-wcf.md)
- [How to: Create a Data Service Using the Reflection Provider](create-a-data-service-using-rp-wcf-data-services.md)
- [Data Services Providers](data-services-providers-wcf-data-services.md)
