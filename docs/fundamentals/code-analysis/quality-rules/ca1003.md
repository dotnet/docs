---
title: "CA1003: Use generic event handler instances (code analysis)"
description: "Learn about code analysis rule CA1003: Use generic event handler instances"
ms.date: 03/11/2019
ms.topic: reference
f1_keywords:
- UseGenericEventHandlerInstances
- CA1003
helpviewer_keywords:
- CA1003
- UseGenericEventHandlerInstances
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
---
# CA1003: Use generic event handler instances

| Item                                     | Value            |
|------------------------------------------|------------------|
| RuleId                                   | CA1003           |
| Category                                 | [Microsoft.Design](design-warnings.md) |
| Fix is breaking or non-breaking | Breaking         |

## Cause

A type contains a delegate that returns void and whose signature contains two parameters (the first an object and the second a type that is assignable to EventArgs), and the containing assembly targets .NET.

By default, this rule only looks at externally visible types, but this is [configurable](#configure-code-to-analyze).

## Rule description

Before .NET Framework 2.0, in order to pass custom information to the event handler, a new delegate had to be declared that specified a class that was derived from the <xref:System.EventArgs?displayProperty=fullName> class. In .NET Framework 2.0 and later versions, the generic <xref:System.EventHandler%601?displayProperty=fullName> delegate allows any class that's derived from <xref:System.EventArgs> to be used together with the event handler.

## How to fix violations

To fix a violation of this rule, remove the delegate and replace its use by using the <xref:System.EventHandler%601?displayProperty=fullName> delegate.

If the delegate is autogenerated by the Visual Basic compiler, change the syntax of the event declaration to use the <xref:System.EventHandler%601?displayProperty=fullName> delegate.

## When to suppress warnings

Do not suppress a warning from this rule.

## Configure code to analyze

Use the following option to configure which parts of your codebase to run this rule on.

- [Include specific API surfaces](#include-specific-api-surfaces)

You can configure this option for just this rule, for all rules, or for all rules in this category ([Design](design-warnings.md)). For more information, see [Code quality rule configuration options](../code-quality-rule-options.md).

[!INCLUDE[api-surface](~/includes/code-analysis/api-surface.md)]

## Example

The following example shows a delegate that violates the rule. In the Visual Basic example, comments describe how to modify the example to satisfy the rule. For the C# example, an example follows that shows the modified code.

:::code language="vb" source="snippets/vb/all-rules/ca1003-use-generic-event-handler-instances_1.vb":::

:::code language="csharp" source="snippets/csharp/all-rules/ca1003.cs" id="snippet1":::

The following code snippet removes the delegate declaration from the previous example, which satisfies the rule. It replaces its use in the `ClassThatRaisesEvent` and `ClassThatHandlesEvent` methods by using the <xref:System.EventHandler%601?displayProperty=fullName> delegate.

:::code language="csharp" source="snippets/csharp/all-rules/ca1003.cs" id="snippet2":::

## Related rules

- [CA1005: Avoid excessive parameters on generic types](ca1005.md)
- [CA1010: Collections should implement generic interface](ca1010.md)
- [CA1000: Do not declare static members on generic types](ca1000.md)
- [CA1002: Do not expose generic lists](ca1002.md)

## See also

- [Generics](../../../csharp/fundamentals/types/generics.md)
