---
title: "CA1816: Call GC.SuppressFinalize correctly (code analysis)"
description: "Learn about code analysis rule CA1816: Call GC.SuppressFinalize correctly"
ms.date: 06/30/2018
ms.topic: reference
f1_keywords:
- CA1816
- DisposeMethodsShouldCallSuppressFinalize
helpviewer_keywords:
- DisposeMethodsShouldCallSuppressFinalize
- CA1816
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
---
# CA1816: Call GC.SuppressFinalize correctly

| | Value |
|-|-|
| **Rule ID** |CA1816|
| **Category** |[Usage](usage-warnings.md)|
| **Fix is breaking or non-breaking** |Non-breaking|

## Cause

Violations of this rule can be caused by:

- A method that is an implementation of <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> and doesn't call <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType>.

- A method that is not an implementation of <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> and calls <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType>.

- A method that calls <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType> and passes something other than [this (C#)](../../../csharp/language-reference/keywords/this.md) or [Me (Visual Basic)](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md#me).

## Rule description

The <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method lets users release resources at any time before the object becoming available for garbage collection. If the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method is called, it frees resources of the object. This makes finalization unnecessary. <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> should call <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType> so the garbage collector doesn't call the finalizer of the object.

To prevent derived types with finalizers from having to reimplement <xref:System.IDisposable> and to call it, unsealed types without finalizers should still call <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType>.

## How to fix violations

To fix a violation of this rule:

- If the method is an implementation of <xref:System.IDisposable.Dispose%2A>, add a call to <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType>.

- If the method is not an implementation of <xref:System.IDisposable.Dispose%2A>, either remove the call to <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType> or move it to the type's <xref:System.IDisposable.Dispose%2A> implementation.

- Change all calls to <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType> to pass [this (C#)](../../../csharp/language-reference/keywords/this.md) or [Me (Visual Basic)](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md#me).

## When to suppress warnings

Only suppress a warning from this rule if you are deliberately using <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType> to control the lifetime of other objects. Don't suppress a warning from this rule if an implementation of <xref:System.IDisposable.Dispose%2A> doesn't call <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType>. In this situation, failing to suppress finalization degrades performance and provides no benefits.

## Example that violates CA1816

This code shows a method that calls <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType>, but doesn't pass [this (C#)](../../../csharp/language-reference/keywords/this.md) or [Me (Visual Basic)](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md#me). As a result, this code violates rule CA1816.

:::code language="vb" source="snippets/vb/all-rules/ca1816-call-gc-suppressfinalize-correctly_1.vb" id="snippet1":::

:::code language="csharp" source="snippets/csharp/all-rules/ca1816.cs" id="snippet1":::

## Example that satisfies CA1816

This example shows a method that correctly calls <xref:System.GC.SuppressFinalize%2A?displayProperty=nameWithType> by passing [this (C#)](../../../csharp/language-reference/keywords/this.md) or [Me (Visual Basic)](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md#me).

:::code language="vb" source="snippets/vb/all-rules/ca1816-call-gc-suppressfinalize-correctly_1.vb" id="snippet2":::

:::code language="csharp" source="snippets/csharp/all-rules/ca1816.cs" id="snippet2":::

## Related rules

- [CA2215: Dispose methods should call base class dispose](ca2215.md)
- [CA2216: Disposable types should declare finalizer](ca2216.md)

## See also

- [Dispose pattern](../../../standard/garbage-collection/implementing-dispose.md)
