---
title: "CA2026: Prefer JsonElement.Parse over JsonDocument.Parse().RootElement"
description: "Learn about code analysis rule CA2026 - Prefer JsonElement.Parse over JsonDocument.Parse().RootElement"
ms.date: 01/22/2025
ms.topic: reference
f1_keywords:
  - CA2026
  - PreferJsonElementParseOverJsonDocumentParse
helpviewer_keywords:
  - CA2026
author: xtqqczze
ai-usage: ai-assisted
dev_langs:
- CSharp
- VB
---

# CA2026: Prefer JsonElement.Parse over JsonDocument.Parse().RootElement

| Property                            | Value                                                                    |
|-------------------------------------|--------------------------------------------------------------------------|
| **Rule ID**                         | CA2026                                                                   |
| **Title**                           | Prefer JsonElement.Parse over JsonDocument.Parse().RootElement          |
| **Category**                        | [Performance](performance-warnings.md)                                   |
| **Fix is breaking or non-breaking** | Non-breaking                                                             |
| **Enabled by default in .NET 10**   | As suggestion                                                            |

## Cause

Code uses `JsonDocument.Parse(json).RootElement` to parse JSON into a <xref:System.Text.Json.JsonElement>.

## Rule description

`JsonElement.Parse(json)` is more efficient than using `JsonDocument.Parse(json).RootElement`. The `JsonDocument` type implements <xref:System.IDisposable> and rents arrays from the <xref:System.Buffers.ArrayPool%601>, which can lead to memory leaks or increased GC pressure if you don't properly dispose the document. The `JsonElement.Parse` method, introduced in .NET 10, parses JSON directly into a <xref:System.Text.Json.JsonElement> without these concerns, making it more efficient and less error-prone.

## How to fix violations

Replace calls to `JsonDocument.Parse(json).RootElement` with `JsonElement.Parse(json)`.

## Example

The following code snippet shows a violation of CA2026:

```csharp
using System.Text.Json;

public class Example
{
    public void ProcessJson(string json)
    {
        JsonElement element = JsonDocument.Parse(json).RootElement;
        // Process element
    }
}
```

```vb
Imports System.Text.Json

Public Class Example
    Public Sub ProcessJson(json As String)
        Dim element As JsonElement = JsonDocument.Parse(json).RootElement
        ' Process element
    End Sub
End Class
```

The following code snippet fixes the violation:

```csharp
using System.Text.Json;

public class Example
{
    public void ProcessJson(string json)
    {
        JsonElement element = JsonElement.Parse(json);
        // Process element
    }
}
```

```vb
Imports System.Text.Json

Public Class Example
    Public Sub ProcessJson(json As String)
        Dim element As JsonElement = JsonElement.Parse(json)
        ' Process element
    End Sub
End Class
```

## When to suppress warnings

Don't suppress warnings from this rule. If you're targeting .NET 10 or later, you should use `JsonElement.Parse` for better performance and resource management.

## Suppress a warning

If you just want to suppress a single violation, add preprocessor directives to your source file to disable and then re-enable the rule.

```csharp
#pragma warning disable CA2026
// The code that's violating the rule is on this line.
#pragma warning restore CA2026
```

To disable the rule for a file, folder, or project, set its severity to `none` in the [configuration file](../configuration-files.md).

```ini
[*.{cs,vb}]
dotnet_diagnostic.CA2026.severity = none
```

For more information, see [How to suppress code analysis warnings](../suppress-warnings.md).

## See also

- [Performance rules](performance-warnings.md)
- <xref:System.Text.Json.JsonElement.Parse%2A?displayProperty=nameWithType>
- <xref:System.Text.Json.JsonDocument.Parse%2A?displayProperty=nameWithType>
