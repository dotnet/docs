

// System.Web.Services.Protocols.LogicalMethodInfo.IsBeginMethod(MethodInfo)
// System.Web.Services.Protocols.LogicalMethodInfo.IsEndMethod(MethodInfo)
/*
The following example demonstrates 'IsBeginMethod' and 'IsEndMethod' methods of 'System.Web.Services.Protocols.LogicalMethodInfo' class. The type information of methods of Math web service is taken in a varible of type MethodInfo. Then 'IsBeginMethod' and 'IsEndMethod' is used to query on created MethodInfo variable to find whether the method is begin and end method for asynchronous invocation or not.
Note:  The below MyMath class is a proxy class generated by the Wsdl.exe utility for the Math Web Service. This class can be found in SoapHttpClientProtocol Class example also.
*/
#using <System.Xml.dll>
#using <System.Web.Services.dll>
#using <System.dll>

using namespace System;
using namespace System::Reflection;
using namespace System::Web::Services::Protocols;

// Automatically generated proxy class for Math Web service.
// This class can also be found in SoapHttpClientProtocol class example.
namespace MyMath
{
using namespace System::Diagnostics;
using namespace System::Xml::Serialization;
using namespace System::Web::Services::Protocols;
using namespace System::Web::Services;

   [System::Web::Services::WebServiceBindingAttribute(Name="MyMathSoap",
   Namespace="http://tempuri.org/")]
   public ref class MyMath: public System::Web::Services::Protocols::SoapHttpClientProtocol
   {
   public:
      MyMath()
      {
         this->Url = "http://localhost/Math.asmx";
      }

      [System::Web::Services::Protocols::SoapDocumentMethodAttribute(
      "http://tempuri.org/Add",
      Use=System::Web::Services::Description::SoapBindingUse::Literal,
      ParameterStyle=System::Web::Services::Protocols::SoapParameterStyle::Wrapped)]
      int Add( int x, int y )
      {
         array<Object^>^temp0 = {x,y};
         array<Object^>^results = this->Invoke( "Add", temp0 );
         return  *dynamic_cast<int^>(results[ 0 ]);
      }

      System::IAsyncResult^ BeginAdd( int x, int y, System::AsyncCallback^ callback, Object^ asyncState )
      {
         array<Object^>^temp1 = {x,y};
         return this->BeginInvoke( "Add", temp1, callback, asyncState );
      }

      int EndAdd( System::IAsyncResult^ asyncResult )
      {
         array<Object^>^results = this->EndInvoke( asyncResult );
         return  *dynamic_cast<int^>(results[ 0 ]);
      }

   };

}

int main()
{
   // <Snippet1>
   // <Snippet2>
   // Get the type for the proxy class MyMath Web service.
   // Note: The MyMath class is a proxy class generated by the Wsdl.exe
   // utility for the Math Web service. This class can also be found in
   // the SoapHttpClientProtocol class example.
   Type^ myType = MyMath::MyMath::typeid;
   MethodInfo^ myBeginMethod = myType->GetMethod( "BeginAdd" );
   MethodInfo^ myEndMethod = myType->GetMethod( "EndAdd" );
   MethodInfo^ myMethod = myType->GetMethod( "Add" );
   Console::WriteLine( "Is 'BeginAdd' a Begin Method : {0}", LogicalMethodInfo::IsBeginMethod( myBeginMethod ) );
   Console::WriteLine( "Is 'Add' a Begin Method : {0}", LogicalMethodInfo::IsBeginMethod( myMethod ) );
   Console::WriteLine( "Is 'EndAdd' an End Method : {0}", LogicalMethodInfo::IsEndMethod( myEndMethod ) );
   // </Snippet2>
   // </Snippet1>
}
